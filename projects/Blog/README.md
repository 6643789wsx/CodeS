# Blog

## What is it?

This is a simple blog system implemented using `Python` and `Flask`.

## Demonstration of Reference Project

Please see [../../assets/blog.mp4](../../assets/blog.mp4)

## Features

<ul>
	<li>Register, login</li>
	<li>Post articles</li>
	<li>Article likes</li>
	<li>Publish, reply to, manage comments</li>
	<li>Set personal profile</li>
	<li>Follow users</li>
	<li>Message notifications and private messaging</li>
	<li>Administrator functions</li>
</ul>

## Usage

Required environment
```
$ pip install -r requirements.txt
```

Updating the database to gain access to roles
```
$ python manage.py deploy
```

Launching the web service
```
$ python manage.py runserver --host 127.0.0.1
```
Open your local browser and visit `127.0.0.1:5000`.

## SQL scheme

Here is the Python code of `migrations` for database creation.

```python
# ### commands auto generated by Alembic - please adjust! ###
op.create_table('admin',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('notice', sa.String(length=25), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_admin_timestamp'), 'admin', ['timestamp'], unique=False)
op.create_table('roles',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('name', sa.String(length=64), nullable=True),
sa.Column('default', sa.Boolean(), nullable=True),
sa.Column('permissions', sa.Integer(), nullable=True),
sa.PrimaryKeyConstraint('id'),
sa.UniqueConstraint('name')
)
op.create_index(op.f('ix_roles_default'), 'roles', ['default'], unique=False)
op.create_table('users',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('nickname', sa.String(length=64), nullable=True),
sa.Column('email', sa.String(length=120), nullable=True),
sa.Column('password_hash', sa.String(length=128), nullable=True),
sa.Column('role_id', sa.Integer(), nullable=True),
sa.Column('about_me', sa.String(length=140), nullable=True),
sa.Column('last_seen', sa.DateTime(), nullable=True),
sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
op.create_index(op.f('ix_users_nickname'), 'users', ['nickname'], unique=True)
op.create_table('conversations',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('from_user_id', sa.Integer(), nullable=True),
sa.Column('to_user_id', sa.Integer(), nullable=True),
sa.Column('letter', sa.String(length=255), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.Column('unread', sa.Boolean(), nullable=True),
sa.ForeignKeyConstraint(['from_user_id'], ['users.id'], ),
sa.ForeignKeyConstraint(['to_user_id'], ['users.id'], ),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_conversations_timestamp'), 'conversations', ['timestamp'], unique=False)
op.create_table('follows',
sa.Column('follower_id', sa.Integer(), nullable=False),
sa.Column('followed_id', sa.Integer(), nullable=False),
sa.Column('unread', sa.Boolean(), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.ForeignKeyConstraint(['followed_id'], ['users.id'], ),
sa.ForeignKeyConstraint(['follower_id'], ['users.id'], ),
sa.PrimaryKeyConstraint('follower_id', 'followed_id')
)
op.create_table('posts',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('title', sa.String(length=64), nullable=True),
sa.Column('body', sa.Text(), nullable=True),
sa.Column('disabled', sa.Boolean(), nullable=True),
sa.Column('view_num', sa.Integer(), nullable=True),
sa.Column('body_html', sa.Text(), nullable=True),
sa.Column('draft', sa.Boolean(), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.Column('author_id', sa.Integer(), nullable=True),
sa.ForeignKeyConstraint(['author_id'], ['users.id'], ),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_posts_timestamp'), 'posts', ['timestamp'], unique=False)
op.create_table('comments',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('body', sa.Text(), nullable=True),
sa.Column('body_html', sa.Text(), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.Column('disabled', sa.Boolean(), nullable=True),
sa.Column('comment_type', sa.String(length=64), nullable=True),
sa.Column('reply_to', sa.String(length=128), nullable=True),
sa.Column('unread', sa.Boolean(), nullable=True),
sa.Column('author_id', sa.Integer(), nullable=True),
sa.Column('post_id', sa.Integer(), nullable=True),
sa.ForeignKeyConstraint(['author_id'], ['users.id'], ),
sa.ForeignKeyConstraint(['post_id'], ['posts.id'], ),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_comments_timestamp'), 'comments', ['timestamp'], unique=False)
op.create_table('likes',
sa.Column('id', sa.Integer(), nullable=False),
sa.Column('unread', sa.Boolean(), nullable=True),
sa.Column('timestamp', sa.DateTime(), nullable=True),
sa.Column('liker_id', sa.Integer(), nullable=True),
sa.Column('post_id', sa.Integer(), nullable=True),
sa.ForeignKeyConstraint(['liker_id'], ['users.id'], ),
sa.ForeignKeyConstraint(['post_id'], ['posts.id'], ),
sa.PrimaryKeyConstraint('id')
)
op.create_index(op.f('ix_likes_timestamp'), 'likes', ['timestamp'], unique=False)
# ### end Alembic commands ###
```